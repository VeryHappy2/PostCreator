<h2>Change role</h2>

<form>
  @if (roles$ | async; as roles) {
    <mat-form-field style="margin-right: 6px;">
      <mat-label>Choose role</mat-label>
      <mat-select (selectionChange)="onSelectChange($event)">
        <mat-option>None</mat-option>
        @for (item of roles.data; track item) {
          <mat-option [value]="item">{{item}}</mat-option>
        }
      </mat-select>
    </mat-form-field>
  }
  <mat-form-field style="margin: 6px;"> 
    <mat-label>Search user</mat-label>
    <input matInput 
          aria-label="Search user"
          [matAutocomplete]="auto"
          [formControl]="userCtrl">
    <mat-autocomplete #auto="matAutocomplete">
      @for (user of filteredUsers | async; track user.userName) {
        <mat-option [value]="user.userName">
          <span>{{user.userName}}</span> |
          <small>Role: {{user.roleName}}</small>
        </mat-option>
      }
    </mat-autocomplete>
  </mat-form-field>

  <button (click)="changeRole()">Change</button>
  @if (check) {
    <p [style.color]="check.flag ? 'greenyellow' : 'red'">
      {{ check.message }}
    </p>
  }
</form>